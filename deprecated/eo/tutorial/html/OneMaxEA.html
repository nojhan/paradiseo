<!doctype html public "-//w3c//dtd html 4.0 transitional//en">
<html>
<head>
   <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
   <meta name="GENERATOR" content="Mozilla/4.78 [en] (X11; U; Linux 2.4.7-10 i686) [Netscape]">
   <title>Templates/OneMaxEA.cpp</title>
</head>
<body text="#000000" bgcolor="#C3C2B4" link="#0000EE" vlink="#551A8B" alink="#FF0000">
<a href="eoLesson5.html">Back to Lesson 5</a> - <a href="eoTutorial.html">Tutorial
main page </a>- <a href="eoTopDown.html">Top-Down page</a> - <a href="eoBottomUp.html">Bottom-up
page</a> - <a href="eoProgramming.html">Programming hints</a> - <font face="Arial,Helvetica"><a href="doc/html/index.html">EO
documentation</a></font>
<br>
<hr WIDTH="100%"><!-- -------------- End of header ------------------ --><!-- ----------------------------------------------- -->
<center>
<h1>
<font color="#FF0000">Templates/OneMaxEA.cpp</font></h1></center>
The places where you have to put some code are on <b><font color="#FF6666">pink
background</font></b>.. Only the the <a href="eoTutorial.html#colors">character
colors have the usual meaning</a>.
<br><a NAME="start"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr NOSAVE>
<td NOSAVE><tt><font color="#993300">/** -*- mode: c++; c-indent-level:
4; c++-member-init-indent: 8; comment-column: 35; -*-</font></tt>
<br><tt><font color="#993300">The above line is usefulin Emacs-like editors</font></tt>
<br><tt><font color="#993300">*/</font></tt>
<br><tt><font color="#993300">/*</font></tt>
<br><tt><font color="#993300">Template for creating a new representation
in EO</font></tt>
<br><tt><font color="#993300">================================================</font></tt>
<br><tt><font color="#993300">This is the template main file.</font></tt>
<br><tt><font color="#993300">It includes all other files that have been
generated by the script create.sh</font></tt>
<br><tt><font color="#993300">so it is the only file to compile.</font></tt>
<br><tt><font color="#993300">In case you want to build up a separate library
for your new Evolving Object,</font></tt>
<br><tt><font color="#993300">you'll need some work - follow what's done
in the src/ga dir, used in the</font></tt>
<br><tt><font color="#993300">main file BitEA in tutorial/Lesson4 dir.</font></tt>
<br><tt><font color="#993300">Or you can wait until we do it :-)</font></tt>
<br><tt><font color="#993300">*/</font></tt>
<br><tt><font color="#993300">// Miscilaneous include and declaration&nbsp;</font></tt>
<br><b><tt><font color="#993300">#include &lt;iostream></font></tt></b>
<br><b><tt><font color="#993300">using namespace std;</font></tt></b>
<br><tt><font color="#993300">// eo general include</font></tt>
<br><b><tt><font color="#993300">#include "eo"</font></tt></b>
<br><tt><font color="#993300">// the real bounds (not yet in general eo
include)</font></tt>
<br><b><tt><font color="#993300">#include "utils/eoRealVectorBounds.h"</font></tt></b>
<br><tt><font color="#993300">// include here whatever specific files for
your representation</font></tt>
<br><tt><font color="#993300">// Basically, this should include at least
the following</font></tt>
<br><tt><font color="#993300">/** definition of representation:&nbsp;</font></tt>
<br><tt><font color="#993300">* class eoOneMax MUST derive from EO&lt;FitT>
for some fitness</font></tt>
<br><tt><font color="#993300">*/</font></tt></td>
</tr>
</table>
<a NAME="representation"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><b><tt><font color="#999900">#include "eoOneMax.h"</font></tt></b>
<br><tt><font color="#999900">/** definition of initilizqtion:&nbsp;</font></tt>
<br><tt><font color="#999900">* class eoOneMaxInit MUST derive from eoInit&lt;eoOneMax></font></tt>
<br><tt><font color="#999900">*/</font></tt></td>
</tr>
</table>
<a NAME="init"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><b><tt><font color="#993399">#include "eoOneMaxInit.h"</font></tt></b>
<br><tt><font color="#993399">/** definition of evaluation:&nbsp;</font></tt>
<br><tt><font color="#993399">* class eoOneMaxEvalFunc MUST derive from
eoEvalFunc&lt;eoOneMax></font></tt>
<br><tt><font color="#993399">* and should test for validity before doing
any computation</font></tt>
<br><tt><font color="#993399">* see tutorial/Templates/evalFunc.tmpl</font></tt>
<br><tt><font color="#993399">*/</font></tt></td>
</tr>
</table>
<a NAME="fitness"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><b><tt><font color="#CC0000">#include "eoOneMaxEvalFunc.h"</font></tt></b>
<br><tt><font color="#CC0000">// GENOTYPE&nbsp;&nbsp;&nbsp; eoOneMax ***MUST***
be templatized over the fitness</font></tt></td>
</tr>
</table>

<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#FFCCCC" NOSAVE >
<tr>
<td><tt><font color="#CC0000">// START fitness type: double or eoMaximizingFitness
if you are maximizing</font></tt>
<br><tt><font color="#CC0000">//&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
eoMinimizingFitness if you are minimizing</font></tt>
<br><tt><font color="#CC0000"><b>typedef eoMinimizingFitness MyFitT ; </b>//
type of fitness&nbsp;</font></tt>
<br><tt><font color="#CC0000">// END fitness type</font></tt></td>
</tr>
</table>

<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td></td>
</tr>
</table>
<a NAME="representation"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#999900">// Then define your EO objects using that
fitness type</font></tt>
<br><tt><font color="#999900"><b>typedef eoOneMax&lt;MyFitT> Indi;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>
// ***MUST*** derive from EO&nbsp;</font></tt></td>
</tr>
</table>
<a NAME="init"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993399">// create an initializer</font></tt>
<br><b><tt><font color="#993399">#include "make_genotype_OneMax.h"</font></tt></b>
<br><b><tt><font color="#993399">eoInit&lt;Indi> &amp; make_genotype(eoParser&amp;
_parser, eoState&amp;_state, Indi _eo)</font></tt></b>
<br><b><tt><font color="#993399">{</font></tt></b>
<br><b><tt><font color="#993399">&nbsp;return do_make_genotype(_parser,
_state, _eo);</font></tt></b>
<br><b><tt><font color="#993399">}&nbsp;</font></tt></b></td>
</tr>
</table>
<a NAME="operators"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993399">// and the variation operaotrs</font></tt>
<br><b><tt><font color="#993399">#include "make_op_OneMax.h"</font></tt></b>
<br><b><tt><font color="#993399">eoGenOp&lt;Indi>&amp;&nbsp; make_op(eoParser&amp;
_parser, eoState&amp; _state, eoInit&lt;Indi>&amp; _init)</font></tt></b>
<br><b><tt><font color="#993399">{</font></tt></b>
<br><b><tt><font color="#993399">&nbsp;return do_make_op(_parser, _state,
_init);</font></tt></b>
<br><b><tt><font color="#993399">}</font></tt></b></td>
</tr>
</table>
<a NAME="init"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993399">// Use existing modules to define representation
independent routines</font></tt>
<br><tt><font color="#993399">// These are parser-based definitions of
objects</font></tt>
<br><tt><font color="#993399">// how to initialize the population&nbsp;</font></tt>
<br><tt><font color="#993399">// it IS representation independent if an
eoInit is given</font></tt>
<br><b><tt><font color="#993399">#include &lt;do/make_pop.h></font></tt></b>
<br><b><tt><font color="#993399">eoPop&lt;Indi >&amp;&nbsp; make_pop(eoParser&amp;
_parser, eoState&amp; _state, eoInit&lt;Indi> &amp; _init)</font></tt></b>
<br><b><tt><font color="#993399">{</font></tt></b>
<br><b><tt><font color="#993399">&nbsp;return do_make_pop(_parser, _state,
_init);</font></tt></b>
<br><b><tt><font color="#993399">}</font></tt></b></td>
</tr>
</table>
<a NAME="stop"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#3366FF">// the stopping criterion</font></tt>
<br><b><tt><font color="#3366FF">#include &lt;do/make_continue.h></font></tt></b>
<br><b><tt><font color="#3366FF">eoContinue&lt;Indi>&amp; make_continue(eoParser&amp;
_parser, eoState&amp; _state, eoEvalFuncCounter&lt;Indi> &amp; _eval)</font></tt></b>
<br><b><tt><font color="#3366FF">{</font></tt></b>
<br><b><tt><font color="#3366FF">&nbsp;return do_make_continue(_parser,
_state, _eval);</font></tt></b>
<br><b><tt><font color="#3366FF">}</font></tt></b></td>
</tr>
</table>
<a NAME="stat"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#3366FF">// outputs (stats, population dumps, ...)</font></tt>
<br><b><tt><font color="#3366FF">#include &lt;do/make_checkpoint.h></font></tt></b>
<br><b><tt><font color="#3366FF">eoCheckPoint&lt;Indi>&amp; make_checkpoint(eoParser&amp;
_parser, eoState&amp; _state, eoEvalFuncCounter&lt;Indi>&amp; _eval, eoContinue&lt;Indi>&amp;
_continue)&nbsp;</font></tt></b>
<br><b><tt><font color="#3366FF">{</font></tt></b>
<br><b><tt><font color="#3366FF">&nbsp;return do_make_checkpoint(_parser,
_state, _eval, _continue);</font></tt></b>
<br><b><tt><font color="#3366FF">}</font></tt></b></td>
</tr>
</table>
<a NAME="engine"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#009900">// evolution engine (selection and replacement)</font></tt>
<br><b><tt><font color="#009900">#include &lt;do/make_algo_scalar.h></font></tt></b>
<br><b><tt><font color="#009900">eoAlgo&lt;Indi>&amp;&nbsp; make_algo_scalar(eoParser&amp;
_parser, eoState&amp; _state, eoEvalFunc&lt;Indi>&amp; _eval, eoContinue&lt;Indi>&amp;
_continue, eoGenOp&lt;Indi>&amp; _op)</font></tt></b>
<br><b><tt><font color="#009900">{</font></tt></b>
<br><b><tt><font color="#009900">&nbsp;return do_make_algo_scalar(_parser,
_state, _eval, _continue, _op);</font></tt></b>
<br><b><tt><font color="#009900">}</font></tt></b></td>
</tr>
</table>
<a NAME="general"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993300">// simple call to the algo. stays there for
consistency reasons&nbsp;</font></tt>
<br><tt><font color="#993300">// no template for that one</font></tt>
<br><b><tt><font color="#993300">#include &lt;do/make_run.h></font></tt></b>
<br><tt><font color="#993300">// the instanciating fitnesses</font></tt>
<br><b><tt><font color="#993300">#include &lt;eoScalarFitness.h></font></tt></b>
<br><b><tt><font color="#993300">void run_ea(eoAlgo&lt;Indi>&amp; _ga,
eoPop&lt;Indi>&amp; _pop)</font></tt></b>
<br><b><tt><font color="#993300">{</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;do_run(_ga, _pop);</font></tt></b>
<br><b><tt><font color="#993300">}</font></tt></b>
<br><tt><font color="#993300">// checks for help demand, and writes the
status file</font></tt>
<br><tt><font color="#993300">// and make_help; in libutils</font></tt>
<br><b><tt><font color="#993300">void make_help(eoParser &amp; _parser);</font></tt></b>
<br><tt><font color="#993300">// now use all of the above, + representation
dependent things</font></tt>
<br><b><tt><font color="#993300">int main(int argc, char* argv[])</font></tt></b>
<br><b><tt><font color="#993300">{</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;try</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;{</font></tt></b>
<br><tt><font color="#993300"><b>&nbsp;eoParser parser(argc, argv);&nbsp;&nbsp;</b>
// for user-parameter reading</font></tt>
<br><tt><font color="#993300"><b>&nbsp;eoState state;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b>
// keeps all things allocated</font></tt></td>
</tr>
</table>
<a NAME="eval"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#CC0000"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b> //
The fitness</font></tt>
<br><tt><font color="#CC0000"><b>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;</b> //////////////</font></tt>
<br><tt><font color="#CC0000"><b>&nbsp;&nbsp; eoOneMaxEvalFunc&lt;Indi>
plainEval</b> /* (varType&nbsp; _anyVariable) */;<b>;</b></font></tt>
<br><tt><font color="#CC0000"><b>&nbsp;&nbsp;&nbsp;</b> // turn that object
into an evaluation counter</font></tt>
<br><b><tt><font color="#CC0000">&nbsp;&nbsp; eoEvalFuncCounter&lt;Indi>
eval(plainEval);</font></tt></b></td>
</tr>
</table>
<a NAME="representation"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#999900"><b>&nbsp;</b> // the genotype - through a
genotype initializer</font></tt>
<br><b><tt><font color="#999900">&nbsp;eoInit&lt;Indi>&amp; init = make_genotype(parser,
state, Indi());</font></tt></b></td>
</tr>
</table>
<a NAME="operators"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993399"><b>&nbsp;</b> // Build the variation operator
(any seq/prop construct)</font></tt>
<br><b><tt><font color="#993399">&nbsp;eoGenOp&lt;Indi>&amp; op = make_op(parser,
state, init);</font></tt></b>
<br><tt><font color="#993399"><b>&nbsp;</b> //// Now the representation-independent
things&nbsp;</font></tt>
<br><tt><font color="#993399"><b>&nbsp;</b> //</font></tt>
<br><tt><font color="#993399"><b>&nbsp;</b> // YOU SHOULD NOT NEED TO MODIFY
ANYTHING BEYOND THIS POINT</font></tt>
<br><tt><font color="#993399"><b>&nbsp;</b> // unless you want to add specific
statistics to the checkpoint</font></tt>
<br><tt><font color="#993399"><b>&nbsp;</b> //////////////////////////////////////////////</font></tt></td>
</tr>
</table>
<a NAME="init"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993399"><b>&nbsp;</b> // initialize the population</font></tt>
<br><tt><font color="#993399"><b>&nbsp;</b> // yes, this is representation
indepedent once you have an eoInit</font></tt>
<br><b><tt><font color="#993399">&nbsp;eoPop&lt;Indi>&amp; pop&nbsp;&nbsp;&nbsp;
= make_pop(parser, state, init);</font></tt></b></td>
</tr>
</table>
<a NAME="stop"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#3366FF"><b>&nbsp;</b> // stopping criteria</font></tt>
<br><b><tt><font color="#3366FF">&nbsp;eoContinue&lt;Indi> &amp; term =
make_continue(parser, state, eval);</font></tt></b></td>
</tr>
</table>
<a NAME="output"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#3366FF"><b>&nbsp;</b> // output</font></tt>
<br><b><tt><font color="#3366FF">&nbsp;eoCheckPoint&lt;Indi> &amp; checkpoint
= make_checkpoint(parser, state, eval, term);</font></tt></b></td>
</tr>
</table>
<a NAME="general"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993300"><b>&nbsp;</b> // algorithm (need the operator!)</font></tt>
<br><b><tt><font color="#993300">&nbsp;eoAlgo&lt;Indi>&amp; ga = make_algo_scalar(parser,
state, eval, checkpoint, op);</font></tt></b>
<br><tt><font color="#993300"><b>&nbsp;</b> ///// End of construction of
the algorithm</font></tt>
<br><tt><font color="#993300"><b>&nbsp;</b> /////////////////////////////////////////</font></tt>
<br><tt><font color="#993300"><b>&nbsp;</b> // to be called AFTER all parameters
have been read!!!</font></tt>
<br><b><tt><font color="#993300">&nbsp;make_help(parser);</font></tt></b>
<br><tt><font color="#993300"><b>&nbsp;</b> //// GO</font></tt>
<br><tt><font color="#993300"><b>&nbsp;</b> ///////</font></tt></td>
</tr>
</table>
<a NAME="eval"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#CC0000"><b>&nbsp;</b> // evaluate intial population
AFTER help and status in case it takes time</font></tt>
<br><b><tt><font color="#CC0000">&nbsp;apply&lt;Indi>(eval, pop);</font></tt></b>
<br><tt><font color="#CC0000"><b>&nbsp;</b> // if you want to print it
out</font></tt>
<br><tt><font color="#CC0000">//&nbsp;&nbsp;&nbsp; cout &lt;&lt; "Initial
Population\n";</font></tt>
<br><tt><font color="#CC0000">//&nbsp;&nbsp;&nbsp; pop.sortedPrintOn(cout);</font></tt>
<br><tt><font color="#CC0000">//&nbsp;&nbsp;&nbsp; cout &lt;&lt; endl;</font></tt></td>
</tr>
</table>
<a NAME="general"></a>
<table BORDER=0 CELLSPACING=0 COLS=1 WIDTH="100%" BGCOLOR="#CCCCCC" NOSAVE >
<tr>
<td><tt><font color="#993300"><b>&nbsp;run_ea(ga, pop); </b>// run the
ga</font></tt>
<br><b><tt><font color="#993300">&nbsp;cout &lt;&lt; "Final Population\n";</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;pop.sortedPrintOn(cout);</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;cout &lt;&lt; endl;</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;}</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;catch(exception&amp; e)</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;{</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;&nbsp;&nbsp;&nbsp; cout &lt;&lt;
e.what() &lt;&lt; endl;</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;}</font></tt></b>
<br><b><tt><font color="#993300">&nbsp;return 0;</font></tt></b>
<br><b><tt><font color="#993300">}</font></tt></b></td>
</tr>
</table>

<hr WIDTH="100%"><a href="eoLesson5.html">Back to Lesson 5</a> - <a href="eoTutorial.html">Tutorial
main page </a>- <a href="eoTopDown.html">Top-Down page</a> - <a href="eoBottomUp.html">Bottom-up
page</a> - <a href="eoProgramming.html">Programming hints</a> - <font face="Arial,Helvetica"><a href="doc/html/index.html">EO
documentation</a></font>
<hr>
<address>
<a href="mailto:marc.schoenauer@inria.fr">Marc Schoenauer</a></address>

<br><!-- Created: Nov 2000 --><!-- hhmts start -->Last modified: Sat May
4 07:37:41 2002<!-- hhmts end -->
</body>
</html>
